# 秘信 - 阅后即焚小程序

## 项目介绍

秘信是一款阅后即焚的微信小程序，用户可以发送带有自动销毁功能的消息（文字、图片、语音、视频等）。接收方查看消息后，消息会自动销毁，同时从双方设备和服务器端删除，以保护信息隐私和安全。

## 核心功能

- **用户认证与管理**：集成微信登录，获取用户openId作为唯一标识
- **实时聊天**：支持发送文字、图片、语音、视频等多媒体消息
- **阅后即焚机制**：接收者查看消息后启动销毁倒计时，倒计时结束后自动删除该条消息
- **消息提醒**：通过小程序云函数或微信模板消息推送新消息提醒
- **安全保护**：消息加密存储、防截屏提醒等隐私保护措施

## 技术架构

- 前端：微信小程序原生框架
- 后端：微信小程序云开发（云函数、云数据库、云存储）
- 安全：AES加密、HTTPS传输、定时数据清理

## 项目结构

```
|- app.js               # 小程序入口文件
|- app.json             # 小程序全局配置
|- app.wxss             # 小程序全局样式
|- assets/              # 静态资源目录
|  |- images/           # 图片资源
|- app/                 # 应用目录
|  |- pages/            # 页面文件
|  |  |- login/         # 登录页面
|  |  |- home/          # 首页/会话列表
|  |  |- chat/          # 聊天页面
|  |- components/       # 自定义组件
|  |  |- message        # 消息组件
|  |- service/          # 服务模块
|  |  |- api.js         # 云函数API接口
|- cloudfunctions/      # 云函数目录
|  |- login/            # 登录云函数
|  |- sendMessage/      # 发送消息云函数
|  |- getMessages/      # 获取消息云函数
|  |- destroyMessage/   # 销毁消息云函数
|  |- getConversations/ # 获取会话列表云函数
```

## 使用说明

1. 克隆项目到本地
2. 使用微信开发者工具打开项目
3. 在微信开发者工具中配置自己的AppID
4. 开通云开发，创建云环境（当前使用的云环境ID: `cloud1-9gmp8bcn2dc3576a`）
5. 上传并部署云函数，同时在云数据库中创建以下集合：
   - `users`: 存储用户信息（头像、昵称、登录时间）
   - `messages`: 存储聊天消息
   - `conversations`: 存储会话信息
6. 如需修改云环境ID，请更新以下文件：
   - `app.js`中的`wx.cloud.init`配置
   - `app/service/api.js`中的`initCloud`函数

## 安全注意事项

- 本项目使用微信提供的加密API保护消息内容
- 用户查看消息后会自动销毁，无法找回
- 为保护隐私，请不要在应用中分享敏感信息
- 由于小程序技术限制，无法100%防止截屏，但会对截屏行为进行提醒

## 开发团队

- 开发者：秘信团队
- 联系邮箱：contact@example.com

## 版本记录

- v1.0.0（2023-06-01）：初始版本发布
- v1.1.0（2023-12-15）：添加云开发支持，实现用户数据存储和消息加密功能