<!--è°ƒè¯•é¡µé¢-->
<view class="debug-container">
  <!-- æ ‡é¢˜ -->
  <view class="debug-header">
    <text class="debug-title">çœŸæœºè°ƒè¯•å·¥å…·</text>
    <text class="debug-subtitle">é‚€è¯·é“¾æ¥å‚æ•°è¯Šæ–­</text>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="debug-actions">
    <button class="debug-btn primary" bindtap="refreshDebugInfo">åˆ·æ–°ä¿¡æ¯</button>
    <button class="debug-btn secondary" bindtap="clearStorage">æ¸…é™¤å­˜å‚¨</button>
    <button class="debug-btn secondary" bindtap="copyDebugInfo">å¤åˆ¶ä¿¡æ¯</button>
  </view>

  <!-- æµ‹è¯•æŒ‰é’® -->
  <view class="debug-tests">
    <view class="debug-section-title">åŠŸèƒ½æµ‹è¯•</view>
    <button class="debug-btn test" bindtap="testCloudFunction">æµ‹è¯•åŸºç¡€äº‘å‡½æ•°</button>
    <button class="debug-btn test" bindtap="testJoinByInviteFunction">æµ‹è¯•joinByInviteäº‘å‡½æ•°</button>
    <button class="debug-btn test" bindtap="testCompleteInviteFlow">æµ‹è¯•å®Œæ•´é‚€è¯·æµç¨‹</button>
    <button class="debug-btn test" bindtap="testRealInviteLink">ğŸ”— æµ‹è¯•çœŸå®é‚€è¯·é“¾æ¥</button>
    <button class="debug-btn test" bindtap="testRealShareLink">ğŸ“¤ æµ‹è¯•çœŸå®åˆ†äº«é“¾æ¥</button>
    <button class="debug-btn test" bindtap="testSharerListening">ğŸ‘¥ æµ‹è¯•åˆ†äº«è€…ç›‘å¬</button>
    <button class="debug-btn test" bindtap="testHomePageShare">ğŸ  æµ‹è¯•é¦–é¡µåˆ†äº«</button>
    <button class="debug-btn test" bindtap="testDirectShare">ğŸ¯ ç›´æ¥æµ‹è¯•åˆ†äº«</button>
    <button class="debug-btn test" bindtap="testInviteProcessing">æµ‹è¯•é‚€è¯·å¤„ç†</button>
    <button class="debug-btn test" bindtap="testNavigateToChat">æµ‹è¯•è·³è½¬èŠå¤©</button>
    <button class="debug-btn test" bindtap="testNavigateToHome">æµ‹è¯•è·³è½¬é¦–é¡µ</button>
  </view>

  <!-- è°ƒè¯•ä¿¡æ¯ -->
  <view class="debug-info">
    <view class="debug-section-title">è°ƒè¯•ä¿¡æ¯</view>
    
    <!-- å…¨å±€æ•°æ® -->
    <view class="debug-section">
      <view class="debug-item-title">å…¨å±€æ•°æ®</view>
      <view class="debug-item-content">
        <text class="debug-text">å¯åŠ¨å‚æ•°: {{debugInfo.globalData.launchOptions}}</text>
        <text class="debug-text">å¾…å¤„ç†é‚€è¯·: {{debugInfo.globalData.pendingInvite}}</text>
        <text class="debug-text">ç™»å½•çŠ¶æ€: {{debugInfo.globalData.hasLogin ? 'å·²ç™»å½•' : 'æœªç™»å½•'}}</text>
        <text class="debug-text">ç”¨æˆ·æ˜µç§°: {{debugInfo.globalData.userInfo.nickName || 'æ— '}}</text>
      </view>
    </view>

    <!-- æœ¬åœ°å­˜å‚¨ -->
    <view class="debug-section">
      <view class="debug-item-title">æœ¬åœ°å­˜å‚¨</view>
      <view class="debug-item-content">
        <text class="debug-text">pendingInvite: {{debugInfo.localStorage.pendingInvite}}</text>
        <text class="debug-text">entryOptions: {{debugInfo.localStorage.entryOptions}}</text>
        <text class="debug-text">ç”¨æˆ·ä¿¡æ¯: {{debugInfo.localStorage.userInfo}}</text>
      </view>
    </view>

    <!-- ç³»ç»Ÿä¿¡æ¯ -->
    <view class="debug-section">
      <view class="debug-item-title">ç³»ç»Ÿä¿¡æ¯</view>
      <view class="debug-item-content">
        <text class="debug-text">å¹³å°: {{debugInfo.systemInfo.platform}}</text>
        <text class="debug-text">ç‰ˆæœ¬: {{debugInfo.systemInfo.version}}</text>
        <text class="debug-text">SDKç‰ˆæœ¬: {{debugInfo.systemInfo.SDKVersion}}</text>
      </view>
    </view>
  </view>

  <!-- æ—¥å¿— -->
  <view class="debug-logs">
    <view class="debug-section-title">æ“ä½œæ—¥å¿—</view>
    <scroll-view class="logs-container" scroll-y="true">
      <view class="log-item" wx:for="{{logs}}" wx:key="time">
        <view class="log-time">{{item.time}}</view>
        <view class="log-message">{{item.message}}</view>
        <view class="log-data" wx:if="{{item.data}}">{{item.data}}</view>
      </view>
    </scroll-view>
  </view>
</view> 