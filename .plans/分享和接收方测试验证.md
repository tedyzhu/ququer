# ğŸ”— åˆ†äº«å’Œæ¥æ”¶æ–¹æµ‹è¯•éªŒè¯

## ğŸ“‹ å½“å‰çŠ¶å†µåˆ†æ

æ ¹æ®çœŸæœºè°ƒè¯•æ—¥å¿—ï¼Œå‘é€æ–¹åŠŸèƒ½å·²ç»æ­£å¸¸ï¼š

âœ… **å‘é€æ–¹æ­£å¸¸å·¥ä½œï¼š**
- ç”¨æˆ·"å‘å†¬"æˆåŠŸç™»å½•
- æˆåŠŸåˆ›å»ºèŠå¤©IDï¼š`chat_1749373080852_t0j4aiqir`
- æ ‡é¢˜æ­£ç¡®æ˜¾ç¤º"å‘å†¬"ï¼ˆå•äººæ—¶æ˜¾ç¤ºè‡ªå·±åå­—ï¼‰
- ç³»ç»Ÿæ¶ˆæ¯æ­£ç¡®æ˜¾ç¤ºï¼š"æ‚¨åˆ›å»ºäº†ç§å¯†èŠå¤©ï¼Œå¯ç‚¹å‡»å³ä¸Šè§’èœå•åˆ†äº«é“¾æ¥é‚€è¯·æœ‹å‹åŠ å…¥"
- æˆåŠŸå‘é€æ¶ˆæ¯"è›è›"

âŒ **é—®é¢˜ï¼š** è¿˜æ²¡æœ‰æ¥æ”¶æ–¹åŠ å…¥ï¼Œæ‰€ä»¥å‚ä¸è€…åªæœ‰1ä¸ªäºº

## ğŸ¯ æ¥ä¸‹æ¥éœ€è¦æµ‹è¯•æ¥æ”¶æ–¹åŠ å…¥æµç¨‹

### æ­¥éª¤1ï¼šéªŒè¯åˆ†äº«åŠŸèƒ½

#### 1.1 æµ‹è¯•åˆ†äº«æŒ‰é’®
åœ¨å½“å‰èŠå¤©é¡µé¢ï¼š
1. **ç‚¹å‡»å³ä¸Šè§’çš„ä¸‰ä¸ªç‚¹ï¼ˆâ‹¯ï¼‰**
2. **é€‰æ‹©åˆ†äº«**
3. **æ£€æŸ¥æ˜¯å¦èƒ½æ­£å¸¸åˆ†äº«**

#### 1.2 æ£€æŸ¥åˆ†äº«é“¾æ¥æ ¼å¼
**åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ§åˆ¶å°è¿è¡Œï¼š**

```javascript
// æ£€æŸ¥åˆ†äº«åŠŸèƒ½
const currentPage = getCurrentPages()[getCurrentPages().length - 1];
console.log('=== åˆ†äº«åŠŸèƒ½æµ‹è¯• ===');
console.log('èŠå¤©ID:', currentPage.data.contactId);
console.log('ç”¨æˆ·æ˜µç§°:', getApp().globalData.userInfo?.nickName);

// æ¨¡æ‹Ÿç”Ÿæˆåˆ†äº«é“¾æ¥
const chatId = currentPage.data.contactId;
const nickName = getApp().globalData.userInfo?.nickName || 'å¥½å‹';
const sharePath = `/app/pages/chat/chat?id=${chatId}&inviter=${encodeURIComponent(nickName)}&fromInvite=true`;

console.log('é¢„æœŸåˆ†äº«é“¾æ¥:', sharePath);
console.log('ç¼–ç åçš„æ˜µç§°:', encodeURIComponent(nickName));
```

**é¢„æœŸç»“æœï¼š** åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„åˆ†äº«é“¾æ¥ï¼š
```
/app/pages/chat/chat?id=chat_1749373080852_t0j4aiqir&inviter=%E5%90%91%E5%86%AC&fromInvite=true
```

### æ­¥éª¤2ï¼šæ¨¡æ‹Ÿæ¥æ”¶æ–¹åŠ å…¥æµ‹è¯•

#### 2.1 ä½¿ç”¨è‡ªå®šä¹‰ç¼–è¯‘æµ‹è¯•æ¥æ”¶æ–¹

**åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼š**
1. ç‚¹å‡» **æ¨¡æ‹Ÿå™¨** - **è‡ªå®šä¹‰ç¼–è¯‘**
2. è¾“å…¥æ¥æ”¶æ–¹æµ‹è¯•URLï¼š

```
/app/pages/chat/chat?id=chat_1749373080852_t0j4aiqir&inviter=å‘å†¬&fromInvite=true
```

3. **ç‚¹å‡»ç¼–è¯‘å¹¶è¿è¡Œ**

#### 2.2 éªŒè¯æ¥æ”¶æ–¹é¢„æœŸæ•ˆæœ

æ¥æ”¶æ–¹é¡µé¢åº”è¯¥æ˜¾ç¤ºï¼š

âœ… **æ ‡é¢˜ï¼š** "æˆ‘å’Œå‘å†¬ï¼ˆ2ï¼‰"  
âœ… **ç³»ç»Ÿæ¶ˆæ¯ï¼š** "æˆåŠŸåŠ å…¥å‘å†¬çš„èŠå¤©ï¼"ï¼ˆç°è‰²å±…ä¸­æ°”æ³¡ï¼‰  
âœ… **ç°æœ‰æ¶ˆæ¯ï¼š** èƒ½çœ‹åˆ°ä¹‹å‰çš„ç³»ç»Ÿæ¶ˆæ¯å’Œ"è›è›"æ¶ˆæ¯  
âœ… **å¤´åƒï¼š** æ¶ˆæ¯æ—è¾¹æ˜¾ç¤ºå¤´åƒ  

### æ­¥éª¤3ï¼šéªŒè¯åŒå‘é€šä¿¡

#### 3.1 æ¥æ”¶æ–¹å‘é€æ¶ˆæ¯
åœ¨æ¥æ”¶æ–¹é¡µé¢å‘é€ä¸€æ¡æµ‹è¯•æ¶ˆæ¯ï¼š
```
æµ‹è¯•æ¶ˆæ¯ï¼šæ¥æ”¶æ–¹å·²åŠ å…¥
```

#### 3.2 å‘é€æ–¹æ£€æŸ¥æ¥æ”¶
å›åˆ°å‘é€æ–¹é¡µé¢ï¼Œæ£€æŸ¥ï¼š
- æ˜¯å¦èƒ½æ”¶åˆ°æ¥æ”¶æ–¹çš„æ¶ˆæ¯
- æ ‡é¢˜æ˜¯å¦æ›´æ–°ä¸º"å‘å†¬ï¼ˆ2ï¼‰"æˆ–ç±»ä¼¼æ ¼å¼
- æ˜¯å¦æ˜¾ç¤º"æœ‰æ–°æœ‹å‹åŠ å…¥äº†èŠå¤©ï¼"çš„ç³»ç»Ÿæ¶ˆæ¯

## ğŸ”§ å¯èƒ½é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šåˆ†äº«æŒ‰é’®ä¸å¯ç”¨
**æ£€æŸ¥ï¼š**
```javascript
// æ£€æŸ¥åˆ†äº«åŠŸèƒ½æ˜¯å¦æ­£å¸¸
console.log('é¡µé¢onShareAppMessageæ–¹æ³•:', typeof getCurrentPages()[getCurrentPages().length - 1].onShareAppMessage);
```

### é—®é¢˜2ï¼šè‡ªå®šä¹‰ç¼–è¯‘æ— æ³•åŠ è½½æ¥æ”¶æ–¹é¡µé¢
**æ‰‹åŠ¨æµ‹è¯•æ–¹æ³•ï¼š**
```javascript
// åœ¨å½“å‰èŠå¤©é¡µé¢æ§åˆ¶å°æ‰‹åŠ¨æ¨¡æ‹Ÿæ¥æ”¶æ–¹åŠ å…¥
const currentPage = getCurrentPages()[getCurrentPages().length - 1];

// æ¨¡æ‹Ÿæ¥æ”¶æ–¹å‚æ•°
const options = {
  id: currentPage.data.contactId,
  inviter: 'å‘å†¬',
  fromInvite: 'true'
};

// é‡æ–°åŠ è½½é¡µé¢æ¨¡æ‹Ÿæ¥æ”¶æ–¹
currentPage.onLoad(options);
```

### é—®é¢˜3ï¼šæ¥æ”¶æ–¹æ— æ³•çœ‹åˆ°ç°è‰²ç³»ç»Ÿæ¶ˆæ¯
**æ‰‹åŠ¨æµ‹è¯•ç³»ç»Ÿæ¶ˆæ¯ï¼š**
```javascript
// åœ¨æ¥æ”¶æ–¹é¡µé¢æ§åˆ¶å°è¿è¡Œ
const currentPage = getCurrentPages()[getCurrentPages().length - 1];
currentPage.addSystemMessage('âœ¨ æˆåŠŸåŠ å…¥å‘å†¬çš„èŠå¤©ï¼');

// æ£€æŸ¥æ¶ˆæ¯æ˜¯å¦æ­£ç¡®æ˜¾ç¤º
console.log('æ¶ˆæ¯åˆ—è¡¨:', currentPage.data.messages);
```

### é—®é¢˜4ï¼šæ ‡é¢˜ä¸æ›´æ–°ä¸ºåŒäººæ ¼å¼
**æ‰‹åŠ¨æµ‹è¯•æ ‡é¢˜æ›´æ–°ï¼š**
```javascript
// æ‰‹åŠ¨è®¾ç½®åŒäººèŠå¤©çŠ¶æ€
const currentPage = getCurrentPages()[getCurrentPages().length - 1];
currentPage.setData({
  participants: [
    {
      id: 'user1',
      nickName: 'å‘å†¬',
      avatarUrl: '/assets/images/default-avatar.png',
      isSelf: false
    },
    {
      id: 'user2',
      nickName: 'æ¥æ”¶æ–¹',
      avatarUrl: '/assets/images/default-avatar.png', 
      isSelf: true
    }
  ]
});

// æ›´æ–°æ ‡é¢˜
currentPage.updateDynamicTitleWithRealNames();
```

## ğŸ‰ æˆåŠŸéªŒè¯æ ‡å‡†

### å‘é€æ–¹ç•Œé¢åº”è¯¥æ˜¾ç¤ºï¼š
- **æ ‡é¢˜æ›´æ–°ï¼š** "å‘å†¬ï¼ˆ2ï¼‰"æˆ–"å‘å†¬å’Œæœ‹å‹ï¼ˆ2ï¼‰"
- **ç³»ç»Ÿæ¶ˆæ¯ï¼š** "æœ‰æ–°æœ‹å‹åŠ å…¥äº†èŠå¤©ï¼"
- **èƒ½æ”¶åˆ°æ¥æ”¶æ–¹æ¶ˆæ¯**

### æ¥æ”¶æ–¹ç•Œé¢åº”è¯¥æ˜¾ç¤ºï¼š
- **æ ‡é¢˜ï¼š** "æˆ‘å’Œå‘å†¬ï¼ˆ2ï¼‰"
- **ç³»ç»Ÿæ¶ˆæ¯ï¼š** "æˆåŠŸåŠ å…¥å‘å†¬çš„èŠå¤©ï¼"ï¼ˆç°è‰²å±…ä¸­æ°”æ³¡ï¼‰
- **ç°æœ‰æ¶ˆæ¯ï¼š** æ‰€æœ‰å†å²æ¶ˆæ¯
- **å¤´åƒï¼š** åŒæ–¹æ¶ˆæ¯éƒ½æœ‰å¤´åƒ

## ğŸ“ æµ‹è¯•æ¸…å•

è¯·æŒ‰é¡ºåºå®Œæˆä»¥ä¸‹æµ‹è¯•ï¼š

- [ ] **æ­¥éª¤1.1** - æµ‹è¯•åˆ†äº«æŒ‰é’®æ˜¯å¦å¯ç”¨
- [ ] **æ­¥éª¤1.2** - æ£€æŸ¥åˆ†äº«é“¾æ¥æ ¼å¼æ˜¯å¦æ­£ç¡®
- [ ] **æ­¥éª¤2.1** - ä½¿ç”¨è‡ªå®šä¹‰ç¼–è¯‘æµ‹è¯•æ¥æ”¶æ–¹
- [ ] **æ­¥éª¤2.2** - éªŒè¯æ¥æ”¶æ–¹é¡µé¢æ˜¾ç¤ºæ•ˆæœ
- [ ] **æ­¥éª¤3.1** - æ¥æ”¶æ–¹å‘é€æµ‹è¯•æ¶ˆæ¯
- [ ] **æ­¥éª¤3.2** - å‘é€æ–¹æ£€æŸ¥æ˜¯å¦æ”¶åˆ°æ¶ˆæ¯

å¦‚æœä»»ä½•æ­¥éª¤å¤±è´¥ï¼Œè¯·å‘Šè¯‰æˆ‘å…·ä½“æ˜¯å“ªä¸€æ­¥ï¼Œæˆ‘ä¼šæä¾›é’ˆå¯¹æ€§çš„è§£å†³æ–¹æ¡ˆï¼

## ğŸ” è°ƒè¯•å‘½ä»¤

**å®æ—¶æ£€æŸ¥èŠå¤©çŠ¶æ€ï¼š**
```javascript
// æ£€æŸ¥å½“å‰èŠå¤©å‚ä¸è€…
console.log('å‚ä¸è€…æ•°é‡:', getCurrentPages()[getCurrentPages().length - 1].data.participants.length);
console.log('å‚ä¸è€…åˆ—è¡¨:', getCurrentPages()[getCurrentPages().length - 1].data.participants);

// æ£€æŸ¥æ¶ˆæ¯åˆ—è¡¨
console.log('æ¶ˆæ¯æ•°é‡:', getCurrentPages()[getCurrentPages().length - 1].data.messages.length);

// æ£€æŸ¥å®æ—¶ç›‘å¬çŠ¶æ€
console.log('å®æ—¶ç›‘å¬æ˜¯å¦å¯åŠ¨:', getCurrentPages()[getCurrentPages().length - 1].messageWatcher ? 'æ˜¯' : 'å¦');
```

è¯·å…ˆæµ‹è¯•åˆ†äº«åŠŸèƒ½ï¼Œç„¶åå°è¯•æ¥æ”¶æ–¹åŠ å…¥æµç¨‹ï¼ğŸš€ 